<% layout('layout') %>

<div
  class="d-flex w-100 justify-content-center align-items-center flex-column h-100"
>
  <div
    class="col-12 col-lg-6 bg-dark p-3 pt-5 rounded position-relative"
    style="padding-top: 4.5rem !important"
  >
    <div
      class="bg-black bg-opacity-75 rounded-circle p-3 position-absolute top-0 start-50 translate-middle"
    >
      <i
        data-feather="edit"
        style="color: white; width: 4rem; height: 4rem"
      ></i>
    </div>

    <form
      action="/home/posts/<%= post._id %>?_method=PUT"
      method="post"
      class="validated-form gap-3 gap-lg-4 d-flex flex-column"
      id="form-post-update"
      enctype="multipart/form-data"
      novalidate
    >
      <div class="mb-3">
        <input
          type="text"
          id="title"
          name="title"
          placeholder="title"
          class="form-control"
          value="<%= post.title %>"
          required
        />
        <div class="valid-feedback">look good!</div>
        <div class="invalid-feedback">please fill title</div>
      </div>
      <div class="mb-3">
        <input
          type="file"
          id="image"
          name="image"
          accept="image/*"
          class="form-control"
        />
      </div>
      <% if (post.image) { %>
      <img
        src="<%= post.image %>"
        alt="image-post"
        class="card-img mt-2"
        style="width: 100px"
      />
      <% } %>
      <div class="mb-3">
        <textarea
          class="form-control"
          placeholder="content"
          id="content"
          name="content"
          style="height: 100px"
          required
        >
<%= post.content %></textarea
        >
        <div class="valid-feedback">look good!</div>
        <div class="invalid-feedback">please fill content</div>
      </div>
    </form>

    <div class="d-flex flex-column gap-2 mt-3">
      <button
        type="submit"
        form="form-post-update"
        class="btn btn-dark bg-black bg-opacity-50"
        style="--bs-btn-hover-bg: transparent"
      >
        <i data-feather="check-square"></i> <b>UPDATE</b>
      </button>
      <a href="/home" class="btn btn-dark bg-black bg-opacity-50">
        <i data-feather="arrow-left"></i> <b>BACK</b>
      </a>
      <button
        class="btn btn-dark bg-black bg-opacity-50"
        style="--bs-btn-hover-bg: transparent"
        id="btn-post-delete"
        type="submit"
      >
        <i data-feather="trash-2"></i> <b>DELETE</b>
      </button>
    </div>
  </div>
</div>

<form
  action="/home/posts/<%= post._id %>?_method=DELETE"
  method="post"
  id="form-post-delete"
></form>

<script src="/js/deletePost.js"></script>
